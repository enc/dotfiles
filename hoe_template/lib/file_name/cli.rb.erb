require "optparse"
require "<%= project %>/version"

module <%= klass %>
  class Cli
    def initialize out, args
      @args    = args
      @run     = true
      @verbose = false

      OptionParser.new do |opts|
        opts.separator ""

        opts.on "--verbose", "-v", "Show more help and diagnostics." do
          @verbose = true
        end

        opts.on "--help", "-h", "-?", "Show this help." do
          out.puts opts
          @run = false
        end

        opts.on "--version", "-V", "Show <%= project %> version." do
          out.puts <%= klass %>::VERSION
          @run = false
        end

        opts.separator ""
        opts.parse! args
        yield self if @run && block_given?
      end
    end

    def verbose?
      @verbose
    end
  end
end
